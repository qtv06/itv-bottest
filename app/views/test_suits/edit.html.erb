<%= form_for @test_suit, url: test_suit_path, method: :patch do |f| %>
  <div class="btn-action">
    <%= link_to "", test_suits_path, class: "btn-back btn-icon", "data-toggle" => "tooltip", title: "Back" %>
    <%= f.submit "", class: "btn-save btn-icon", "data-toggle" => "tooltip", title: "Save Test Suit" %>
    <%= link_to "", new_test_suit_test_case_path(@test_suit), class: "btn-add btn-icon", "data-toggle" => "tooltip", title: "Add Test Case" %>
    <%= link_to "", "#", class: "btn-share btn-icon", "data-toggle" => "tooltip", title: "Share Test Case" %>
    <%= link_to "", "#", class: "btn-notification btn-icon", "data-toggle" => "tooltip", title: "Notifications" %>
  </div>
  <div class="row mg-20">
    <div class="col-md-2 col-sm-4 label-test-suit">
      <%= f.label "Test Suit Name" %>
    </div>
    <div class="col-md-4 col-sm-6 input-test-suite">
      <%= f.text_field :name, class: "form-control"%>
    </div>
  </div>
<% end %>
 <div class="center"><button data-toggle="modal" data-target="#squarespaceModal" class="btn btn-primary center-block btn-commit">Commit TestCase</button></div>
<table class="table table-hover">
  <thead>
    <tr>
      <th>Test Cases</th>
      <th class="th-icon">Edit</th>
      <th class="th-icon">Status</th>
      <th class="th-icon">Export</th>
      <th class="th-icon">Duplicate</th>
      <th class="th-icon">Delete</th>
    </tr>
  </thead>
  <tbody>
    <% @test_cases.reverse.each do |t_case| %>
      <tr>
        <td><span class="icon-file"></span><%= link_to t_case.name, edit_test_suit_test_case_path(@test_suit, t_case) %></td>
        <td class="icon-action"><%= link_to "", edit_test_suit_test_case_path(@test_suit, t_case), class: "glyphicon glyphicon-pencil" %></td>
        <% if t_case.status == "Commited" %>
         <td class="icon-action"><span class="label label-success">
        <% else %>
          <td class="icon-action"><span class="label label-primary">
        <% end %>
        <%= t_case.status %></span></td>
        <td class="icon-action"><%= link_to "", "#", class: "glyphicon glyphicon-save" %></td>
        <td class="icon-action"><%= link_to "", "#", class: "fa fa-clone" %></td>
        <td class="icon-action"><%= link_to "", test_suit_test_case_path(@test_suit, t_case), method: :delete, data: {confirm: "Are you sure?" }, remote: true, class: "glyphicon glyphicon-trash" %></td>
      </tr>
    <% end %>
  </tbody>
</table>



<div class="modal fade" id="squarespaceModal" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
  <div class="modal-dialog">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">Ã—</span><span class="sr-only">Close</span></button>
      <h4 class="modal-title" id="lineModalLabel">List Test Case Change</h4>
    </div>
    <div class="modal-body">

            <!-- content goes here -->
      <form>
        <div class="form-group">
          <ul class="item-case-change"></ul>
        </div>
        <div class="form-group">
          <label for="exampleInputEmail1">Commit</label>
          <input type="email" class="form-control" id="exampleInputEmail1" placeholder="ex: Just change test_case">
        </div>
        <button type="submit" class="btn btn-default">Submit</button>
      </form>

    </div>
    <div class="modal-footer">
      <div class="btn-group btn-group-justified" role="group" aria-label="group button">
        <div class="btn-group" role="group">
          <button type="button" class="btn btn-default" data-dismiss="modal"  role="button">Close</button>
        </div>
        <div class="btn-group btn-delete hidden" role="group">
          <button type="button" id="delImage" class="btn btn-default btn-hover-red" data-dismiss="modal"  role="button">Delete</button>
        </div>
        <div class="btn-group" role="group">
          <button type="button" id="saveImage" class="btn btn-default btn-hover-green" data-action="save" role="button">Save</button>
        </div>
      </div>
    </div>
  </div>
  </div>
</div>

<script>
  $(document).ready(function() {
    $('.btn-commit').click(function(event) {
      /* Act on the event */
      $.ajax({
        url: '/test_suits/commit',
        type: 'GET',
        data: {test_suit: gon.test_suit},
        success: function(data){
          var ul_tc = $('.item-case-change');
          $(ul_tc).empty();
          data.forEach(function(item){
            var li = $("<li></li>");
            var span = $("<span></span>").text(item["name"]);
            $(li).append(span);
            // $(li).text(item["name"]);
            ul_tc.append(li);
            console.log(item["name"]);
          })
          // console.log(data);
        }
      });

    });
  });
</script>
